[
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:d979177d983a3b1418b955a82677bfe9e05e20d537d548b5828a9d76f38aae98",
          "index": 0
        },
        {
          "digest": "sha256:5769e2ffde8ece8e140d642dfc459011a9c88fb66d5eb9df5d6dfd0ec1a79abf",
          "index": 0
        }
      ],
      "Op": {
        "File": {
          "actions": [
            {
              "input": 0,
              "secondaryInput": 1,
              "output": 0,
              "Action": {
                "Copy": {
                  "src": "/usr/bin/composer",
                  "dest": "/usr/bin/composer",
                  "mode": -1,
                  "followSymlink": true,
                  "dirCopyContents": true,
                  "createDestPath": true,
                  "allowWildcard": true,
                  "timestamp": -1
                }
              }
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:0611baaf7a85568d40f38ceee8a36b430942fc21232dc18350b275e007b5ffe5",
    "OpMetadata": {
      "description": {
        "llb.customname": "Copy /usr/bin/composer"
      },
      "caps": {
        "file.base": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:b9037bdebc05bd3971511cfbed74c2738dd9c951ed1addfaf0ae55ade710d5f4",
          "index": 0
        }
      ],
      "Op": {
        "Exec": {
          "meta": {
            "args": [
              "/bin/sh",
              "-o",
              "errexit",
              "-c",
              "docker-php-ext-configure opcache  \u0026\u0026 docker-php-ext-configure zip  \u0026\u0026 docker-php-ext-install -j\"$(nproc)\" opcache zip \u0026\u0026 docker-php-source delete \u0026\u0026 curl -f -o /usr/local/sbin/notpecl https://storage.googleapis.com/notpecl/notpecl \u0026\u0026 chmod +x /usr/local/sbin/notpecl \u0026\u0026 notpecl install apcu:5.1.18 \u0026\u0026 docker-php-ext-enable apcu \u0026\u0026 rm -rf /usr/local/sbin/notpecl"
            ],
            "env": [
              "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
              "PHPIZE_DEPS=autoconf \t\tdpkg-dev \t\tfile \t\tg++ \t\tgcc \t\tlibc-dev \t\tmake \t\tpkg-config \t\tre2c",
              "PHP_INI_DIR=/usr/local/etc/php",
              "PHP_EXTRA_CONFIGURE_ARGS=--enable-fpm --with-fpm-user=www-data --with-fpm-group=www-data --disable-cgi",
              "PHP_CFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64",
              "PHP_CPPFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64",
              "PHP_LDFLAGS=-Wl,-O1 -Wl,--hash-style=both -pie",
              "GPG_KEYS=42670A7FE4D0441C8E4632349E4FDC074A4EF02D 5A52880781F755608BF815FC910DEB46F53EA312",
              "PHP_VERSION=7.4.0",
              "PHP_URL=https://www.php.net/get/php-7.4.0.tar.xz/from/this/mirror",
              "PHP_ASC_URL=https://www.php.net/get/php-7.4.0.tar.xz.asc/from/this/mirror",
              "PHP_SHA256=9bb751b20e5d6cc1ea9b1ebf23ef2d5f07f99b2d9cc417bf1d70c04f8b20ec42",
              "PHP_MD5="
            ],
            "cwd": "/var/www/html"
          },
          "mounts": [
            {
              "input": 0,
              "dest": "/",
              "output": 0
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:1748eb748cfc4237b34e7d1e6e9d65f20f395b95d2ae93803d01e994678cab2a",
    "OpMetadata": {
      "description": {
        "llb.customname": "Install PHP extensions (apcu, opcache, zip)"
      },
      "caps": {
        "exec.meta.base": true,
        "exec.mount.bind": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:fa829a35e3735315ac62ca1d3916f86756a5bfbd7cd7b36e7890fe0f7a7338ae",
          "index": 0
        }
      ],
      "Op": {
        "Exec": {
          "meta": {
            "args": [
              "/bin/sh",
              "-o",
              "errexit",
              "-c",
              "composer global require --prefer-dist hirak/prestissimo \u0026\u0026 composer install --no-dev --prefer-dist --no-scripts \u0026\u0026 composer clear-cache"
            ],
            "env": [
              "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
              "PHPIZE_DEPS=autoconf \t\tdpkg-dev \t\tfile \t\tg++ \t\tgcc \t\tlibc-dev \t\tmake \t\tpkg-config \t\tre2c",
              "PHP_INI_DIR=/usr/local/etc/php",
              "PHP_EXTRA_CONFIGURE_ARGS=--enable-fpm --with-fpm-user=www-data --with-fpm-group=www-data --disable-cgi",
              "PHP_CFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64",
              "PHP_CPPFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64",
              "PHP_LDFLAGS=-Wl,-O1 -Wl,--hash-style=both -pie",
              "GPG_KEYS=42670A7FE4D0441C8E4632349E4FDC074A4EF02D 5A52880781F755608BF815FC910DEB46F53EA312",
              "PHP_VERSION=7.4.0",
              "PHP_URL=https://www.php.net/get/php-7.4.0.tar.xz/from/this/mirror",
              "PHP_ASC_URL=https://www.php.net/get/php-7.4.0.tar.xz.asc/from/this/mirror",
              "PHP_SHA256=9bb751b20e5d6cc1ea9b1ebf23ef2d5f07f99b2d9cc417bf1d70c04f8b20ec42",
              "PHP_MD5=",
              "COMPOSER_HOME=/composer"
            ],
            "cwd": "/app",
            "user": "1000"
          },
          "mounts": [
            {
              "input": 0,
              "dest": "/",
              "output": 0
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:26790deaba3aab4ea3bb3a8c22f1e12b27a4f3f15b3bcebfa630eac999120051",
    "OpMetadata": {
      "description": {
        "llb.customname": "Run composer install"
      },
      "caps": {
        "exec.meta.base": true,
        "exec.mount.bind": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:26790deaba3aab4ea3bb3a8c22f1e12b27a4f3f15b3bcebfa630eac999120051",
          "index": 0
        },
        {
          "digest": "sha256:9b51e3ad866a51fc1fb76e2ada24d3ae8074199279e26556dd3ac7dfbe17d9e6",
          "index": 0
        }
      ],
      "Op": {
        "File": {
          "actions": [
            {
              "input": 0,
              "secondaryInput": 1,
              "output": 0,
              "Action": {
                "Copy": {
                  "src": "/",
                  "dest": "/app/",
                  "owner": {
                    "user": {
                      "User": {
                        "ByID": 1000
                      }
                    },
                    "group": {
                      "User": {
                        "ByID": 1000
                      }
                    }
                  },
                  "mode": -1,
                  "followSymlink": true,
                  "dirCopyContents": true,
                  "createDestPath": true,
                  "allowWildcard": true,
                  "timestamp": -1
                }
              }
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:29cb8b15aef6492ae09930f39f942781b400683c92bc33388f2104cabf63976c",
    "OpMetadata": {
      "description": {
        "llb.customname": "Copy /"
      },
      "caps": {
        "file.base": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:976b7615da6560156d7ce0933897c7f4a9b9ebd2634a6c3efe6a09c8150ada8c",
          "index": 0
        }
      ],
      "Op": {
        "File": {
          "actions": [
            {
              "input": 0,
              "secondaryInput": -1,
              "output": 0,
              "Action": {
                "Mkdir": {
                  "path": "/composer",
                  "mode": 488,
                  "makeParents": true,
                  "owner": {
                    "user": {
                      "User": {
                        "ByID": 1000
                      }
                    },
                    "group": {
                      "User": {
                        "ByID": 1000
                      }
                    }
                  },
                  "timestamp": -1
                }
              }
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:3b841ceb80658c16116c2b5395562019b28c86b7e544ac0127508de8dedafb4f",
    "OpMetadata": {
      "caps": {
        "file.base": true
      }
    }
  },
  {
    "Op": {
      "Op": {
        "Source": {
          "identifier": "docker-image://docker.io/library/composer:1.9.0"
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:5769e2ffde8ece8e140d642dfc459011a9c88fb66d5eb9df5d6dfd0ec1a79abf",
    "OpMetadata": {
      "caps": {
        "source.image": true
      }
    }
  },
  {
    "Op": {
      "Op": {
        "Source": {
          "identifier": "docker-image://docker.io/library/nginx:latest"
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:62549b609c62be5d4a072c8b1697ba6e0f40e59bf6b340565f5132922031518b",
    "OpMetadata": {
      "caps": {
        "source.image": true
      }
    }
  },
  {
    "Op": {
      "Op": {
        "Source": {
          "identifier": "local://context",
          "attrs": {
            "local.includepattern": "[\"composer.json\",\"composer.lock\"]",
            "local.session": "\u003cSESSION-ID\u003e",
            "local.sharedkeyhint": "composer-files"
          }
        }
      },
      "constraints": {}
    },
    "Digest": "sha256:6c2ebeb5c8483c2d0cef692223fb140cc054ddaf43068f3d9915039ce221f180",
    "OpMetadata": {
      "description": {
        "llb.customname": "load composer files from build context"
      },
      "caps": {
        "source.local": true,
        "source.local.includepatterns": true,
        "source.local.sessionid": true,
        "source.local.sharedkeyhint": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:1748eb748cfc4237b34e7d1e6e9d65f20f395b95d2ae93803d01e994678cab2a",
          "index": 0
        }
      ],
      "Op": {
        "File": {
          "actions": [
            {
              "input": 0,
              "secondaryInput": -1,
              "output": 0,
              "Action": {
                "Mkdir": {
                  "path": "/app",
                  "mode": 488,
                  "makeParents": true,
                  "owner": {
                    "user": {
                      "User": {
                        "ByID": 1000
                      }
                    },
                    "group": {
                      "User": {
                        "ByID": 1000
                      }
                    }
                  },
                  "timestamp": -1
                }
              }
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:976b7615da6560156d7ce0933897c7f4a9b9ebd2634a6c3efe6a09c8150ada8c",
    "OpMetadata": {
      "caps": {
        "file.base": true
      }
    }
  },
  {
    "Op": {
      "Op": {
        "Source": {
          "identifier": "local://context",
          "attrs": {
            "local.session": "\u003cSESSION-ID\u003e",
            "local.sharedkeyhint": "build-context"
          }
        }
      },
      "constraints": {}
    },
    "Digest": "sha256:9b51e3ad866a51fc1fb76e2ada24d3ae8074199279e26556dd3ac7dfbe17d9e6",
    "OpMetadata": {
      "description": {
        "llb.customname": "load build context"
      },
      "caps": {
        "source.local": true,
        "source.local.sessionid": true,
        "source.local.sharedkeyhint": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:0611baaf7a85568d40f38ceee8a36b430942fc21232dc18350b275e007b5ffe5",
          "index": 0
        }
      ],
      "Op": {
        "Exec": {
          "meta": {
            "args": [
              "/bin/sh",
              "-o",
              "errexit",
              "-c",
              "apt-get update; apt-get install -y --no-install-recommends git=1:2.20.1-2+deb10u1 libpcre3-dev=2:8.39-12 libzip-dev=1.5.1-4 unzip=6.0-23+deb10u1 zlib1g-dev=1:1.2.11.dfsg-1; rm -rf /var/lib/apt/lists/*"
            ],
            "env": [
              "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
              "PHPIZE_DEPS=autoconf \t\tdpkg-dev \t\tfile \t\tg++ \t\tgcc \t\tlibc-dev \t\tmake \t\tpkg-config \t\tre2c",
              "PHP_INI_DIR=/usr/local/etc/php",
              "PHP_EXTRA_CONFIGURE_ARGS=--enable-fpm --with-fpm-user=www-data --with-fpm-group=www-data --disable-cgi",
              "PHP_CFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64",
              "PHP_CPPFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64",
              "PHP_LDFLAGS=-Wl,-O1 -Wl,--hash-style=both -pie",
              "GPG_KEYS=42670A7FE4D0441C8E4632349E4FDC074A4EF02D 5A52880781F755608BF815FC910DEB46F53EA312",
              "PHP_VERSION=7.4.0",
              "PHP_URL=https://www.php.net/get/php-7.4.0.tar.xz/from/this/mirror",
              "PHP_ASC_URL=https://www.php.net/get/php-7.4.0.tar.xz.asc/from/this/mirror",
              "PHP_SHA256=9bb751b20e5d6cc1ea9b1ebf23ef2d5f07f99b2d9cc417bf1d70c04f8b20ec42",
              "PHP_MD5="
            ],
            "cwd": "/var/www/html"
          },
          "mounts": [
            {
              "input": 0,
              "dest": "/",
              "output": 0
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:b9037bdebc05bd3971511cfbed74c2738dd9c951ed1addfaf0ae55ade710d5f4",
    "OpMetadata": {
      "description": {
        "llb.customname": "Install system packages (git=1:2.20.1-2+deb10u1, libpcre3-dev=2:8.39-12, libzip-dev=1.5.1-4, unzip=6.0-23+deb10u1, zlib1g-dev=1:1.2.11.dfsg-1)"
      },
      "caps": {
        "exec.meta.base": true,
        "exec.mount.bind": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:ff591ab3a98d81a1e98d9827d79d2ae5e431c165475e98a7abb66ae86b71ae4d",
          "index": 0
        }
      ],
      "Op": null
    },
    "Digest": "sha256:d39d310f6ef76cb8beac4ea63dcd8f299e46e39b993b203dda9bf3523a524fff",
    "OpMetadata": {
      "caps": {
        "constraints": true,
        "meta.description": true,
        "platform": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:29cb8b15aef6492ae09930f39f942781b400683c92bc33388f2104cabf63976c",
          "index": 0
        }
      ],
      "Op": {
        "Exec": {
          "meta": {
            "args": [
              "/bin/sh",
              "-o",
              "errexit",
              "-c",
              "composer dump-autoload --no-dev --optimize --classmap-authoritative"
            ],
            "env": [
              "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
              "PHPIZE_DEPS=autoconf \t\tdpkg-dev \t\tfile \t\tg++ \t\tgcc \t\tlibc-dev \t\tmake \t\tpkg-config \t\tre2c",
              "PHP_INI_DIR=/usr/local/etc/php",
              "PHP_EXTRA_CONFIGURE_ARGS=--enable-fpm --with-fpm-user=www-data --with-fpm-group=www-data --disable-cgi",
              "PHP_CFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64",
              "PHP_CPPFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64",
              "PHP_LDFLAGS=-Wl,-O1 -Wl,--hash-style=both -pie",
              "GPG_KEYS=42670A7FE4D0441C8E4632349E4FDC074A4EF02D 5A52880781F755608BF815FC910DEB46F53EA312",
              "PHP_VERSION=7.4.0",
              "PHP_URL=https://www.php.net/get/php-7.4.0.tar.xz/from/this/mirror",
              "PHP_ASC_URL=https://www.php.net/get/php-7.4.0.tar.xz.asc/from/this/mirror",
              "PHP_SHA256=9bb751b20e5d6cc1ea9b1ebf23ef2d5f07f99b2d9cc417bf1d70c04f8b20ec42",
              "PHP_MD5=",
              "COMPOSER_HOME=/composer"
            ],
            "cwd": "/app",
            "user": "1000"
          },
          "mounts": [
            {
              "input": 0,
              "dest": "/",
              "output": 0
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:d42e317e5b8862bb1a9604ade2945bc0d96de82539b01105138388bb781bda46",
    "OpMetadata": {
      "description": {
        "llb.customname": "Dump autoloader and execute custom post-install steps"
      },
      "caps": {
        "exec.meta.base": true,
        "exec.mount.bind": true
      }
    }
  },
  {
    "Op": {
      "Op": {
        "Source": {
          "identifier": "docker-image://docker.io/library/php:7.4-fpm-buster"
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:d979177d983a3b1418b955a82677bfe9e05e20d537d548b5828a9d76f38aae98",
    "OpMetadata": {
      "caps": {
        "source.image": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:62549b609c62be5d4a072c8b1697ba6e0f40e59bf6b340565f5132922031518b",
          "index": 0
        }
      ],
      "Op": {
        "Exec": {
          "meta": {
            "args": [
              "/bin/sh",
              "-o",
              "errexit",
              "-c",
              "apt-get update; apt-get install -y --no-install-recommends curl=7.64.0-4; rm -rf /var/lib/apt/lists/*"
            ],
            "env": [
              "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
              "NGINX_VERSION=1.17.6",
              "NJS_VERSION=0.3.7",
              "PKG_RELEASE=1~buster"
            ],
            "cwd": "/"
          },
          "mounts": [
            {
              "input": 0,
              "dest": "/",
              "output": 0
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:e375eec25ea2b2e21cd3ebb2547038adddaee7c52c64bc7fdfa98cfcf1b61b20",
    "OpMetadata": {
      "description": {
        "llb.customname": "Install system packages (curl=7.64.0-4)"
      },
      "caps": {
        "exec.meta.base": true,
        "exec.mount.bind": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:3b841ceb80658c16116c2b5395562019b28c86b7e544ac0127508de8dedafb4f",
          "index": 0
        },
        {
          "digest": "sha256:6c2ebeb5c8483c2d0cef692223fb140cc054ddaf43068f3d9915039ce221f180",
          "index": 0
        }
      ],
      "Op": {
        "File": {
          "actions": [
            {
              "input": 0,
              "secondaryInput": 1,
              "output": 0,
              "Action": {
                "Copy": {
                  "src": "/composer.*",
                  "dest": "/app/",
                  "owner": {
                    "user": {
                      "User": {
                        "ByID": 1000
                      }
                    },
                    "group": {
                      "User": {
                        "ByID": 1000
                      }
                    }
                  },
                  "mode": -1,
                  "followSymlink": true,
                  "dirCopyContents": true,
                  "createDestPath": true,
                  "allowWildcard": true,
                  "timestamp": -1
                }
              }
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:fa829a35e3735315ac62ca1d3916f86756a5bfbd7cd7b36e7890fe0f7a7338ae",
    "OpMetadata": {
      "description": {
        "llb.customname": "Copy composer.*"
      },
      "caps": {
        "file.base": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:e375eec25ea2b2e21cd3ebb2547038adddaee7c52c64bc7fdfa98cfcf1b61b20",
          "index": 0
        },
        {
          "digest": "sha256:d42e317e5b8862bb1a9604ade2945bc0d96de82539b01105138388bb781bda46",
          "index": 0
        }
      ],
      "Op": {
        "File": {
          "actions": [
            {
              "input": 0,
              "secondaryInput": 1,
              "output": 0,
              "Action": {
                "Copy": {
                  "src": "/app/public",
                  "dest": "/app/public",
                  "owner": {
                    "user": {
                      "User": {
                        "ByID": 1000
                      }
                    },
                    "group": {
                      "User": {
                        "ByID": 1000
                      }
                    }
                  },
                  "mode": -1,
                  "followSymlink": true,
                  "dirCopyContents": true,
                  "createDestPath": true,
                  "allowWildcard": true,
                  "timestamp": -1
                }
              }
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:ff591ab3a98d81a1e98d9827d79d2ae5e431c165475e98a7abb66ae86b71ae4d",
    "OpMetadata": {
      "description": {
        "llb.customname": "Copy /app/public"
      },
      "caps": {
        "file.base": true
      }
    }
  }
]