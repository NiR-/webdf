[
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:bb97e9cc87895b7fb029fdff8e7264a223b29c57ac08a92e28fb7990299ecb96",
          "index": 0
        },
        {
          "digest": "sha256:d3c7f4b1de9501fc7678bac3d9258c0da84bf0c13ac644220165eebf5a2e9c52",
          "index": 0
        }
      ],
      "Op": {
        "File": {
          "actions": [
            {
              "input": 0,
              "secondaryInput": 1,
              "output": 0,
              "Action": {
                "Copy": {
                  "src": "/",
                  "dest": "/app/",
                  "owner": {
                    "user": {
                      "User": {
                        "ByID": 1000
                      }
                    },
                    "group": {
                      "User": {
                        "ByID": 1000
                      }
                    }
                  },
                  "mode": -1,
                  "followSymlink": true,
                  "dirCopyContents": true,
                  "createDestPath": true,
                  "allowWildcard": true,
                  "timestamp": -1
                }
              }
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:0dc420e6e83c976ac8f5438104d3d3ebe446dcdc6641b8cf3316d87659be7cda",
    "OpMetadata": {
      "description": {
        "llb.customname": "Copy /"
      },
      "caps": {
        "file.base": true
      }
    }
  },
  {
    "Op": {
      "Op": {
        "Source": {
          "identifier": "local://context",
          "attrs": {
            "local.includepattern": "[\"docker/app/php.ini\",\"docker/app/fpm.conf\"]",
            "local.session": "\u003cSESSION-ID\u003e",
            "local.sharedkeyhint": "config-files"
          }
        }
      },
      "constraints": {}
    },
    "Digest": "sha256:0e16c24b18eae2f2bcc40859484d8a0cfbc6ff4fe85d6a487fb1b3dc37ac88d2",
    "OpMetadata": {
      "description": {
        "llb.customname": "load config files from build context"
      },
      "caps": {
        "source.local": true,
        "source.local.includepatterns": true,
        "source.local.sessionid": true,
        "source.local.sharedkeyhint": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:8d81e3db3b19680c8c97f827533f52b72c4cc03f27a8b677f9e72261316b9790",
          "index": 0
        }
      ],
      "Op": {
        "Exec": {
          "meta": {
            "args": [
              "/bin/sh",
              "-o",
              "errexit",
              "-o",
              "pipefail",
              "-c",
              "docker-php-ext-configure intl  \u0026\u0026 docker-php-ext-configure pdo_mysql  \u0026\u0026 docker-php-ext-configure soap  \u0026\u0026 docker-php-ext-configure sockets  \u0026\u0026 docker-php-ext-configure zip  \u0026\u0026 docker-php-ext-install -j\"$(nproc)\" intl pdo_mysql soap sockets zip \u0026\u0026 docker-php-source delete"
            ],
            "env": [
              "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
              "PHPIZE_DEPS=autoconf \t\tdpkg-dev \t\tfile \t\tg++ \t\tgcc \t\tlibc-dev \t\tmake \t\tpkg-config \t\tre2c",
              "PHP_INI_DIR=/usr/local/etc/php",
              "PHP_EXTRA_CONFIGURE_ARGS=--enable-fpm --with-fpm-user=www-data --with-fpm-group=www-data --disable-cgi",
              "PHP_CFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64",
              "PHP_CPPFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64",
              "PHP_LDFLAGS=-Wl,-O1 -Wl,--hash-style=both -pie",
              "GPG_KEYS=CBAF69F173A0FEA4B537F470D66C9593118BCCB6 F38252826ACD957EF380D39F2F7956BC5DA04B5D",
              "PHP_VERSION=7.3.12",
              "PHP_URL=https://www.php.net/get/php-7.3.12.tar.xz/from/this/mirror",
              "PHP_ASC_URL=https://www.php.net/get/php-7.3.12.tar.xz.asc/from/this/mirror",
              "PHP_SHA256=aafe5e9861ad828860c6af8c88cdc1488314785962328eb1783607c1fdd855df",
              "PHP_MD5="
            ],
            "cwd": "/var/www/html"
          },
          "mounts": [
            {
              "input": 0,
              "dest": "/",
              "output": 0
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:352a5c3df313660e5071915d7b72867f519c0429af9e59704aa9701c91370456",
    "OpMetadata": {
      "description": {
        "llb.customname": "Install PHP extensions (intl, pdo_mysql, soap, sockets, zip)"
      },
      "caps": {
        "exec.meta.base": true,
        "exec.mount.bind": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:6a53b57bab4533ecd09c7a0fc6dff7c157dd3901e8bb7860f82a4dc63185ee37",
          "index": 0
        }
      ],
      "Op": null
    },
    "Digest": "sha256:402a7e561331199ce8fcd31a26df9680e46bf26993f628716853ee981b6ba6a1",
    "OpMetadata": {
      "caps": {
        "constraints": true,
        "meta.description": true,
        "platform": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:b9f10a55063de603c39ec622c7567bd68e1e502c24f280c58cfea650be3c06ef",
          "index": 0
        }
      ],
      "Op": {
        "File": {
          "actions": [
            {
              "input": 0,
              "secondaryInput": -1,
              "output": 0,
              "Action": {
                "Mkdir": {
                  "path": "/composer",
                  "mode": 488,
                  "makeParents": true,
                  "owner": {
                    "user": {
                      "User": {
                        "ByID": 1000
                      }
                    },
                    "group": {
                      "User": {
                        "ByID": 1000
                      }
                    }
                  },
                  "timestamp": -1
                }
              }
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:54fdb104a0d582af08f29ae19e2bda31b7c83b3ca1576b55d1d0b64bfad25f61",
    "OpMetadata": {
      "caps": {
        "file.base": true
      }
    }
  },
  {
    "Op": {
      "Op": {
        "Source": {
          "identifier": "docker-image://docker.io/library/composer:1.9.0"
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:5769e2ffde8ece8e140d642dfc459011a9c88fb66d5eb9df5d6dfd0ec1a79abf",
    "OpMetadata": {
      "caps": {
        "source.image": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:0dc420e6e83c976ac8f5438104d3d3ebe446dcdc6641b8cf3316d87659be7cda",
          "index": 0
        }
      ],
      "Op": {
        "Exec": {
          "meta": {
            "args": [
              "/bin/sh",
              "-o",
              "errexit",
              "-o",
              "pipefail",
              "-c",
              "composer dump-autoload --no-dev --optimize --classmap-authoritative; php -d display_errors=on bin/console cache:warmup --env=prod"
            ],
            "env": [
              "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
              "PHPIZE_DEPS=autoconf \t\tdpkg-dev \t\tfile \t\tg++ \t\tgcc \t\tlibc-dev \t\tmake \t\tpkg-config \t\tre2c",
              "PHP_INI_DIR=/usr/local/etc/php",
              "PHP_EXTRA_CONFIGURE_ARGS=--enable-fpm --with-fpm-user=www-data --with-fpm-group=www-data --disable-cgi",
              "PHP_CFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64",
              "PHP_CPPFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64",
              "PHP_LDFLAGS=-Wl,-O1 -Wl,--hash-style=both -pie",
              "GPG_KEYS=CBAF69F173A0FEA4B537F470D66C9593118BCCB6 F38252826ACD957EF380D39F2F7956BC5DA04B5D",
              "PHP_VERSION=7.3.12",
              "PHP_URL=https://www.php.net/get/php-7.3.12.tar.xz/from/this/mirror",
              "PHP_ASC_URL=https://www.php.net/get/php-7.3.12.tar.xz.asc/from/this/mirror",
              "PHP_SHA256=aafe5e9861ad828860c6af8c88cdc1488314785962328eb1783607c1fdd855df",
              "PHP_MD5=",
              "COMPOSER_HOME=/composer"
            ],
            "cwd": "/app",
            "user": "1000"
          },
          "mounts": [
            {
              "input": 0,
              "dest": "/",
              "output": 0
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:6a53b57bab4533ecd09c7a0fc6dff7c157dd3901e8bb7860f82a4dc63185ee37",
    "OpMetadata": {
      "description": {
        "llb.customname": "Dump autoloader and execute custom post-install steps"
      },
      "caps": {
        "exec.meta.base": true,
        "exec.mount.bind": true
      }
    }
  },
  {
    "Op": {
      "Op": {
        "Source": {
          "identifier": "local://context",
          "attrs": {
            "local.includepattern": "[\"composer.json\",\"composer.lock\"]",
            "local.session": "\u003cSESSION-ID\u003e",
            "local.sharedkeyhint": "composer-files"
          }
        }
      },
      "constraints": {}
    },
    "Digest": "sha256:6c2ebeb5c8483c2d0cef692223fb140cc054ddaf43068f3d9915039ce221f180",
    "OpMetadata": {
      "description": {
        "llb.customname": "load composer files from build context"
      },
      "caps": {
        "source.local": true,
        "source.local.includepatterns": true,
        "source.local.sessionid": true,
        "source.local.sharedkeyhint": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:a392c2dad4b5f940caab47592b2772953a84e2866ed32e7c9c986433f857f8e3",
          "index": 0
        }
      ],
      "Op": {
        "Exec": {
          "meta": {
            "args": [
              "/bin/sh",
              "-o",
              "errexit",
              "-o",
              "pipefail",
              "-c",
              "apt-get update; apt-get install -y --no-install-recommends git=1:2.20.1-2 libicu-dev=63.1-6 libpcre3-dev=2:8.39-12 libssl-dev=1.1.1d-0+deb10u2 libxml2-dev=2.9.4+dfsg1-7+b3 openssl=1.1.1d-0+deb10u2 unzip=6.0-23+deb10u1 zlib1g-dev=1:1.2.11.dfsg-1; rm -rf /var/lib/apt/lists/*"
            ],
            "env": [
              "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
              "PHPIZE_DEPS=autoconf \t\tdpkg-dev \t\tfile \t\tg++ \t\tgcc \t\tlibc-dev \t\tmake \t\tpkg-config \t\tre2c",
              "PHP_INI_DIR=/usr/local/etc/php",
              "PHP_EXTRA_CONFIGURE_ARGS=--enable-fpm --with-fpm-user=www-data --with-fpm-group=www-data --disable-cgi",
              "PHP_CFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64",
              "PHP_CPPFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64",
              "PHP_LDFLAGS=-Wl,-O1 -Wl,--hash-style=both -pie",
              "GPG_KEYS=CBAF69F173A0FEA4B537F470D66C9593118BCCB6 F38252826ACD957EF380D39F2F7956BC5DA04B5D",
              "PHP_VERSION=7.3.12",
              "PHP_URL=https://www.php.net/get/php-7.3.12.tar.xz/from/this/mirror",
              "PHP_ASC_URL=https://www.php.net/get/php-7.3.12.tar.xz.asc/from/this/mirror",
              "PHP_SHA256=aafe5e9861ad828860c6af8c88cdc1488314785962328eb1783607c1fdd855df",
              "PHP_MD5="
            ],
            "cwd": "/var/www/html"
          },
          "mounts": [
            {
              "input": 0,
              "dest": "/",
              "output": 0
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:8d81e3db3b19680c8c97f827533f52b72c4cc03f27a8b677f9e72261316b9790",
    "OpMetadata": {
      "description": {
        "llb.customname": "Install system packages (git, libicu-dev, libpcre3-dev, libssl-dev, libxml2-dev, openssl, unzip, zlib1g-dev)"
      },
      "caps": {
        "exec.meta.base": true,
        "exec.mount.bind": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:e5334d23dfc3ba4cd5e1109127206bd80b2a0ff61557543d5efc159421e131c1",
          "index": 0
        },
        {
          "digest": "sha256:0e16c24b18eae2f2bcc40859484d8a0cfbc6ff4fe85d6a487fb1b3dc37ac88d2",
          "index": 0
        }
      ],
      "Op": {
        "File": {
          "actions": [
            {
              "input": 0,
              "secondaryInput": 1,
              "output": 0,
              "Action": {
                "Copy": {
                  "src": "/docker/app/fpm.conf",
                  "dest": "/usr/local/etc/php-fpm.conf",
                  "owner": {
                    "user": {
                      "User": {
                        "ByID": 1000
                      }
                    },
                    "group": {
                      "User": {
                        "ByID": 1000
                      }
                    }
                  },
                  "mode": -1,
                  "followSymlink": true,
                  "dirCopyContents": true,
                  "createDestPath": true,
                  "allowWildcard": true,
                  "timestamp": -1
                }
              }
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:918c29b75a3748721e369ff6840e2ac91bc8b110c13732e2d1c5134860ef7893",
    "OpMetadata": {
      "description": {
        "llb.customname": "Copy docker/app/fpm.conf"
      },
      "caps": {
        "file.base": true
      }
    }
  },
  {
    "Op": {
      "Op": {
        "Source": {
          "identifier": "docker-image://docker.io/library/php:7.3-fpm-buster"
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:a2276464f946e4f5f458792c85f10e6a5d6895d2f628fc2aa120f2a13d8416ce",
    "OpMetadata": {
      "caps": {
        "source.image": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:a2276464f946e4f5f458792c85f10e6a5d6895d2f628fc2aa120f2a13d8416ce",
          "index": 0
        },
        {
          "digest": "sha256:5769e2ffde8ece8e140d642dfc459011a9c88fb66d5eb9df5d6dfd0ec1a79abf",
          "index": 0
        }
      ],
      "Op": {
        "File": {
          "actions": [
            {
              "input": 0,
              "secondaryInput": 1,
              "output": 0,
              "Action": {
                "Copy": {
                  "src": "/usr/bin/composer",
                  "dest": "/usr/bin/composer",
                  "mode": -1,
                  "followSymlink": true,
                  "dirCopyContents": true,
                  "createDestPath": true,
                  "allowWildcard": true,
                  "timestamp": -1
                }
              }
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:a392c2dad4b5f940caab47592b2772953a84e2866ed32e7c9c986433f857f8e3",
    "OpMetadata": {
      "description": {
        "llb.customname": "Copy /usr/bin/composer"
      },
      "caps": {
        "file.base": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:352a5c3df313660e5071915d7b72867f519c0429af9e59704aa9701c91370456",
          "index": 0
        }
      ],
      "Op": {
        "File": {
          "actions": [
            {
              "input": 0,
              "secondaryInput": -1,
              "output": 0,
              "Action": {
                "Mkdir": {
                  "path": "/app",
                  "mode": 488,
                  "makeParents": true,
                  "owner": {
                    "user": {
                      "User": {
                        "ByID": 1000
                      }
                    },
                    "group": {
                      "User": {
                        "ByID": 1000
                      }
                    }
                  },
                  "timestamp": -1
                }
              }
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:b9f10a55063de603c39ec622c7567bd68e1e502c24f280c58cfea650be3c06ef",
    "OpMetadata": {
      "caps": {
        "file.base": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:cba9a151c52df8e6a76dac0110b0186a3b51a392c85815998d26cff796b0c600",
          "index": 0
        }
      ],
      "Op": {
        "Exec": {
          "meta": {
            "args": [
              "/bin/sh",
              "-o",
              "errexit",
              "-o",
              "pipefail",
              "-c",
              "composer global require --prefer-dist hirak/prestissimo \u0026\u0026 composer install --no-dev --prefer-dist --no-scripts \u0026\u0026 composer clear-cache"
            ],
            "env": [
              "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
              "PHPIZE_DEPS=autoconf \t\tdpkg-dev \t\tfile \t\tg++ \t\tgcc \t\tlibc-dev \t\tmake \t\tpkg-config \t\tre2c",
              "PHP_INI_DIR=/usr/local/etc/php",
              "PHP_EXTRA_CONFIGURE_ARGS=--enable-fpm --with-fpm-user=www-data --with-fpm-group=www-data --disable-cgi",
              "PHP_CFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64",
              "PHP_CPPFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64",
              "PHP_LDFLAGS=-Wl,-O1 -Wl,--hash-style=both -pie",
              "GPG_KEYS=CBAF69F173A0FEA4B537F470D66C9593118BCCB6 F38252826ACD957EF380D39F2F7956BC5DA04B5D",
              "PHP_VERSION=7.3.12",
              "PHP_URL=https://www.php.net/get/php-7.3.12.tar.xz/from/this/mirror",
              "PHP_ASC_URL=https://www.php.net/get/php-7.3.12.tar.xz.asc/from/this/mirror",
              "PHP_SHA256=aafe5e9861ad828860c6af8c88cdc1488314785962328eb1783607c1fdd855df",
              "PHP_MD5=",
              "COMPOSER_HOME=/composer"
            ],
            "cwd": "/app",
            "user": "1000"
          },
          "mounts": [
            {
              "input": 0,
              "dest": "/",
              "output": 0
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:bb97e9cc87895b7fb029fdff8e7264a223b29c57ac08a92e28fb7990299ecb96",
    "OpMetadata": {
      "description": {
        "llb.customname": "Run composer install"
      },
      "caps": {
        "exec.meta.base": true,
        "exec.mount.bind": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:918c29b75a3748721e369ff6840e2ac91bc8b110c13732e2d1c5134860ef7893",
          "index": 0
        },
        {
          "digest": "sha256:6c2ebeb5c8483c2d0cef692223fb140cc054ddaf43068f3d9915039ce221f180",
          "index": 0
        }
      ],
      "Op": {
        "File": {
          "actions": [
            {
              "input": 0,
              "secondaryInput": 1,
              "output": 0,
              "Action": {
                "Copy": {
                  "src": "/composer.*",
                  "dest": "/app/",
                  "owner": {
                    "user": {
                      "User": {
                        "ByID": 1000
                      }
                    },
                    "group": {
                      "User": {
                        "ByID": 1000
                      }
                    }
                  },
                  "mode": -1,
                  "followSymlink": true,
                  "dirCopyContents": true,
                  "createDestPath": true,
                  "allowWildcard": true,
                  "timestamp": -1
                }
              }
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:cba9a151c52df8e6a76dac0110b0186a3b51a392c85815998d26cff796b0c600",
    "OpMetadata": {
      "description": {
        "llb.customname": "Copy composer.*"
      },
      "caps": {
        "file.base": true
      }
    }
  },
  {
    "Op": {
      "Op": {
        "Source": {
          "identifier": "local://context",
          "attrs": {
            "local.includepattern": "[\"app/\",\"src/\",\"bin/console\",\"web/app.php\"]",
            "local.session": "\u003cSESSION-ID\u003e",
            "local.sharedkeyhint": "build-context"
          }
        }
      },
      "constraints": {}
    },
    "Digest": "sha256:d3c7f4b1de9501fc7678bac3d9258c0da84bf0c13ac644220165eebf5a2e9c52",
    "OpMetadata": {
      "description": {
        "llb.customname": "load build context"
      },
      "caps": {
        "source.local": true,
        "source.local.includepatterns": true,
        "source.local.sessionid": true,
        "source.local.sharedkeyhint": true
      }
    }
  },
  {
    "Op": {
      "inputs": [
        {
          "digest": "sha256:54fdb104a0d582af08f29ae19e2bda31b7c83b3ca1576b55d1d0b64bfad25f61",
          "index": 0
        },
        {
          "digest": "sha256:0e16c24b18eae2f2bcc40859484d8a0cfbc6ff4fe85d6a487fb1b3dc37ac88d2",
          "index": 0
        }
      ],
      "Op": {
        "File": {
          "actions": [
            {
              "input": 0,
              "secondaryInput": 1,
              "output": 0,
              "Action": {
                "Copy": {
                  "src": "/docker/app/php.ini",
                  "dest": "/usr/local/etc/php/php.ini",
                  "owner": {
                    "user": {
                      "User": {
                        "ByID": 1000
                      }
                    },
                    "group": {
                      "User": {
                        "ByID": 1000
                      }
                    }
                  },
                  "mode": -1,
                  "followSymlink": true,
                  "dirCopyContents": true,
                  "createDestPath": true,
                  "allowWildcard": true,
                  "timestamp": -1
                }
              }
            }
          ]
        }
      },
      "platform": {
        "Architecture": "amd64",
        "OS": "linux"
      },
      "constraints": {}
    },
    "Digest": "sha256:e5334d23dfc3ba4cd5e1109127206bd80b2a0ff61557543d5efc159421e131c1",
    "OpMetadata": {
      "description": {
        "llb.customname": "Copy docker/app/php.ini"
      },
      "caps": {
        "file.base": true
      }
    }
  }
]